
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Server scenario &#8212; pyrfc 1.9.91 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security" href="authentication.html" />
    <link rel="prev" title="Client scenario" href="client.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">pyrfc 1.9.91 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="client.html" title="Client scenario"
             accesskey="P">previous</a> |
          <a href="authentication.html" title="Security"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-scenario">
<span id="server"></span><h1>Server scenario<a class="headerlink" href="#server-scenario" title="Permalink to this headline">¶</a></h1>
<p>Server usage refers to a situation, in which a Python script serves RFC requests
that are sent by an SAP backend system.</p>
<p>To illustrate the usage, we will first show an <a class="reference internal" href="#server-example"><span class="std std-ref">Example serverStfcConnection.py</span></a>, then
describe some basic aspects of the <a class="reference internal" href="#server-server"><span class="std std-ref">Server</span></a> and finally cover some
<a class="reference internal" href="#server-advanced"><span class="std std-ref">Advanced topics</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For this section, we assume previous knowledge from the <a class="reference internal" href="client.html#client"><span class="std std-ref">Client scenario</span></a> section.
Furthermore, the server related article by <a class="reference internal" href="bibliography.html#c09b"><span class="std std-ref">Schmidt and Li (2009b)</span></a>
is highly recommended.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Server functionality is currently not working with Python 32bit under
Windows.</p>
</div>
<div class="section" id="example-serverstfcconnection-py">
<span id="server-example"></span><h2>Example <code class="docutils literal notranslate"><span class="pre">serverStfcConnection.py</span></code><a class="headerlink" href="#example-serverstfcconnection-py" title="Permalink to this headline">¶</a></h2>
<p>Creating a Python RFC server consists basically of two parts:</p>
<ol class="arabic simple">
<li>A <a class="reference internal" href="pyrfc.html#pyrfc.Server" title="pyrfc.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> object that stores metadata about the functions
that it will serve, and that later registers at a gateway.</li>
<li>For each served function, a callback function (or: implementing function)
has to be provided.</li>
</ol>
<p>A simple example for a server can be found
in the file <code class="docutils literal notranslate"><span class="pre">serverStfcConnection.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">examples/</span></code> directory.
This server offers a function with the same metadata as <code class="docutils literal notranslate"><span class="pre">STFC_CONNECTION</span></code>,
but will return a slightly modified version as the usual ABAP implementation.</p>
<p>The metadata for <code class="docutils literal notranslate"><span class="pre">STFC_CONNECTION</span></code> consists of</p>
<ul class="simple">
<li>one IMPORT parameter – <code class="docutils literal notranslate"><span class="pre">REQUTEXT</span></code> – and</li>
<li>two EXPORT parameters – <code class="docutils literal notranslate"><span class="pre">ECHOTEXT</span></code> (usually a copy of <code class="docutils literal notranslate"><span class="pre">REQUTEXT</span></code>) and
<code class="docutils literal notranslate"><span class="pre">RESPTEXT</span></code> (usually some connection/system details).</li>
</ul>
<div class="section" id="stfc-connection-callback-function">
<h3><code class="docutils literal notranslate"><span class="pre">STFC_CONNECTION</span></code> callback function<a class="headerlink" href="#stfc-connection-callback-function" title="Permalink to this headline">¶</a></h3>
<p>Lets look at our callback function (ll. 9-14), that implements the server logic:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;sapnwrfc.cfg&#39;</span><span class="p">)</span>

<span class="c1"># Callback function</span>
<span class="k">def</span> <span class="nf">my_stfc_connection</span><span class="p">(</span><span class="n">request_context</span><span class="p">,</span> <span class="n">REQUTEXT</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
</pre></div>
</div>
<p>The callback function takes two parameters. The first one, <code class="docutils literal notranslate"><span class="pre">request_context</span></code>
contains call-specific information and is obligatory for any callback function.
Afterwards, the parameters depend on the function’s metadata description.
In our case, there is one IMPORT parameter that is expected by the callback
function.</p>
<p>The callback function fills the value for the two EXPORT parameters and returns
them in a dictionary.</p>
</div>
<div class="section" id="stfc-connection-server">
<h3><code class="docutils literal notranslate"><span class="pre">STFC_CONNECTION</span></code> Server<a class="headerlink" href="#stfc-connection-server" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="pyrfc.html#pyrfc.Server" title="pyrfc.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> class offers server related functionality.
In the example, its usage is found in lines 23-27.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">params_connection</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">_sections</span><span class="p">[</span><span class="s1">&#39;connection&#39;</span><span class="p">]</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="o">**</span><span class="n">params_connection</span><span class="p">)</span>
<span class="n">func_desc_stfc_connection</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_function_description</span><span class="p">(</span><span class="s2">&quot;STFC_CONNECTION&quot;</span><span class="p">)</span>

<span class="c1"># Instantiate server with gateway information for registering, and</span>
</pre></div>
</div>
<ul class="simple">
<li>First, a <a class="reference internal" href="pyrfc.html#pyrfc.Server" title="pyrfc.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> object is created and gateway parameters
are passed.</li>
<li>Second, a function is installed via <a class="reference internal" href="pyrfc.html#pyrfc.Server.install_function" title="pyrfc.Server.install_function"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install_function()</span></code></a>.
The parameters are a <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a> object and
a callback function.</li>
<li>Finally, the server serves requests by invoking the
<a class="reference internal" href="pyrfc.html#pyrfc.Server.serve" title="pyrfc.Server.serve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">serve()</span></code></a> method.</li>
</ul>
<p>A remark regarding the second point: The function description
for our callback function is retrieved from an SAP system in lines 17-20.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="s1">&#39;RESPTEXT&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s2">&quot;Python server here. Connection attributes are: &quot;</span>
                    <span class="sa">u</span><span class="s2">&quot;User &#39;{user}&#39; from system &#39;{sysId}&#39;, client &#39;{client}&#39;, &quot;</span>
                    <span class="sa">u</span><span class="s2">&quot;host &#39;{partnerHost}&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">request_context</span><span class="p">[</span><span class="s1">&#39;connection_attributes&#39;</span><span class="p">])</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Retrieving functions descriptions in such a way is convenient for various
reasons (cf. <a class="reference internal" href="bibliography.html#c09b"><span class="std std-ref">Schmidt and Li (2009b, p. 2)</span></a>). However, hard coding
of function descriptions is possible (cf. <a class="reference internal" href="#ex-serverfunctiondescription"><span class="std std-ref">Example serverFunctionDescription.py</span></a>).</p>
</div>
<div class="section" id="registering-the-server">
<h3>Registering the server<a class="headerlink" href="#registering-the-server" title="Permalink to this headline">¶</a></h3>
<p>Registering the server needs some preparation in the SAP backend.
Configuration of RFC connections is handled in transaction <code class="docutils literal notranslate"><span class="pre">SM59</span></code>.
Create a new RFC destination (e.g. <code class="docutils literal notranslate"><span class="pre">PYTHON_SVR_DEST</span></code>) of type <code class="docutils literal notranslate"><span class="pre">T</span></code> and
choose under technical settings:</p>
<ul class="simple">
<li>Activation type: Registered Server Program</li>
<li>Registered Server Program: Program ID &lt;your program ID&gt;</li>
</ul>
<p>The program ID is used when instantiating a Server object.</p>
</div>
<div class="section" id="invoking-the-server">
<h3>Invoking the server<a class="headerlink" href="#invoking-the-server" title="Permalink to this headline">¶</a></h3>
<p>A simple approach to invoke our server is to</p>
<ol class="arabic simple">
<li>log on to an SAP backend system,</li>
<li>use transaction <code class="docutils literal notranslate"><span class="pre">SE37</span></code>,</li>
<li>test/execute the function module <code class="docutils literal notranslate"><span class="pre">STFC_CONNECTION</span></code>, and</li>
<li>set <code class="docutils literal notranslate"><span class="pre">RFC</span> <span class="pre">target</span> <span class="pre">sys.</span></code> to the RFC destination of the server
(e.g. <code class="docutils literal notranslate"><span class="pre">PYTHON_SVR_DEST</span></code>).</li>
</ol>
</div>
</div>
<div class="section" id="server-server">
<span id="id1"></span><h2>Server<a class="headerlink" href="#server-server" title="Permalink to this headline">¶</a></h2>
<p>For server usage, the Python connector offers the class <a class="reference internal" href="pyrfc.html#pyrfc.Server" title="pyrfc.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a>.
An object is instantiated with gateway parameters. The server will register
at this gateway before serving requests.</p>
<p>Gateway parameters are:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">GWHOST</span></code></dt>
<dd>The name of the gateway host</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GWSERV</span></code></dt>
<dd>The name of the gateway server</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PROGRAM_ID</span></code></dt>
<dd>The name under which the Python connector will register at the gateway. This
corresponds to an RFC destination in transaction <code class="docutils literal notranslate"><span class="pre">SM59</span></code> of type “T” in
registration mode.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TRACE</span></code></dt>
<dd>Sets the trace level, cf. the documentation of <code class="docutils literal notranslate"><span class="pre">RfcSetTraceLevel</span></code> in
<code class="docutils literal notranslate"><span class="pre">sapnwrfc.h</span></code> of the C connector.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SAPROUTER</span></code></dt>
<dd>An SAP router string</dd>
</dl>
<p>Furthermore, the server accepts a <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
<div class="section" id="config">
<span id="server-config"></span><h3>Config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p>Upon construction, a <a class="reference internal" href="pyrfc.html#pyrfc.Server" title="pyrfc.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> object may be configured
in various ways by passing a <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
<div class="section" id="rstrip">
<span id="server-config-rstrip"></span><h4><a class="reference internal" href="pyrfc.html#pyrfc.Server.rstrip" title="pyrfc.Server.rstrip"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rstrip</span></code></a><a class="headerlink" href="#rstrip" title="Permalink to this headline">¶</a></h4>
<p>ABAP allows two different ways to store strings: A fixed length string type C
and a dynamic length string type STRING.
Strings of type C are padded with blanks, if the content is shorter than the
predefined length. In order to unify the connectors behavior regarding strings,
the <code class="docutils literal notranslate"><span class="pre">rstrip</span></code> option was introduced. If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, all strings are right
stripped before being passed to the callback function.</p>
<p><em>Default: True</em></p>
</div>
</div>
<div class="section" id="server-functions">
<span id="id2"></span><h3>Server functions<a class="headerlink" href="#server-functions" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="pyrfc.html#pyrfc.Server.install_function" title="pyrfc.Server.install_function"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.install_function()</span></code></a> installs a function in the server. It
expects two parameters: a <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a> object for the metadata
description and a callback function that implements the server logic.</p>
<p>The callback function will be called if the gateway receives an RFC call for
the given <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a> and if the server object is serving
requests (<a class="reference internal" href="pyrfc.html#pyrfc.Server.serve" title="pyrfc.Server.serve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.serve()</span></code></a>).
In this case, the callback function is called with the following parameters:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">request_context</span></code></dt>
<dd><p class="first">A dictionary with the following key:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">connection_attributes</span></code></dt>
<dd>A dictionary with connection attributes of the client. The keys are the
same as returned by <a class="reference internal" href="pyrfc.html#pyrfc.Connection.get_connection_attributes" title="pyrfc.Connection.get_connection_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_connection_attributes()</span></code></a>, excluding
<code class="docutils literal notranslate"><span class="pre">alive</span></code> and <code class="docutils literal notranslate"><span class="pre">active_unit</span></code>. As done by
<a class="reference internal" href="pyrfc.html#pyrfc.Connection.get_connection_attributes" title="pyrfc.Connection.get_connection_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_connection_attributes()</span></code></a>, the values are right stripped
strings. These connection attributes may be used for authorization checks.</dd>
</dl>
<p class="last">For a future release, information about active parameters will be given here.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;PARAMETERS&gt;</span></code></dt>
<dd>All IMPORT, CHANGING, and TABLE parameters of the <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a>.</dd>
</dl>
</div>
</div>
<div class="section" id="advanced-topics">
<span id="server-advanced"></span><h2>Advanced topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="raising-exceptions">
<span id="server-advanced-exceptions"></span><h3>Raising exceptions<a class="headerlink" href="#raising-exceptions" title="Permalink to this headline">¶</a></h3>
<p>An external server program is allowed to throw errors as a usual ABAP function
module. To do so, a certain type of exception is raised.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="12%" />
<col width="10%" />
<col width="16%" />
<col width="7%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error type</th>
<th class="head">Corresponds to ABAP statement</th>
<th class="head">In Python triggered via</th>
<th class="head">Arguments to pass</th>
<th class="head">Effect on connection</th>
<th class="head">Effect in the back end (ABAP)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ABAP exception</td>
<td>RAISE &lt;exception key&gt;</td>
<td>raise ABAPApplicationError(…)</td>
<td>key</td>
<td>Remains open</td>
<td>SY-SUBRC is set corresponding to the exception key in the EXCEPTIONS clause.</td>
</tr>
<tr class="row-odd"><td>ABAP exception with details</td>
<td>MESSAGE … RAISING &lt;exception key&gt;</td>
<td>raise ABAPApplicationError(…)</td>
<td>key, msg_type, msg_class, msg_number, msg_v1-v4</td>
<td>Remains open</td>
<td>As above. The following fields are filled: SY-MSGTY, SY-MSGID, SY-MSGNO, and SY-MSGV1-V4.</td>
</tr>
<tr class="row-even"><td>ABAP message</td>
<td>MESSAGE …</td>
<td>raise ABAPRuntimeError(…)</td>
<td>msg_type, msg_class, msg_number, msg_v1-v4</td>
<td>Is closed</td>
<td>SY-SUBRC is set corresponding to the SYSTEM_FAILURE key in the EXCEPTIONS clause and the SY-MSG fields are filled as above.</td>
</tr>
<tr class="row-odd"><td>System failure</td>
<td>&#160;</td>
<td>raise ExternalRuntimeError(…)</td>
<td>message</td>
<td>Is closed</td>
<td>SY-SUBRC is set corresponding to the SYSTEM_FAILURE key in the EXCEPTIONS clause and the parameter specified in the MESSAGE addition is filled.</td>
</tr>
</tbody>
</table>
<p>Other exceptions are not permitted. For further details on error raising cf.
<a class="reference internal" href="bibliography.html#c09b"><span class="std std-ref">Schmidt and Li (2009b, pp. 6ff)</span></a>.</p>
<p>Note that the arguments have a maximum length. If a longer string is passed,
only the first valid number of characters will be used.</p>
<ul class="simple">
<li>key: 128 chars</li>
<li>message: 512 chars</li>
<li>msg_type: 1 char</li>
<li>msg_class: 20 chars</li>
<li>msg_number: 3 chars</li>
<li>msg_v1-v4: 50 chars each</li>
</ul>
</div>
<div class="section" id="authorization">
<span id="server-advanced-authorization"></span><h3>Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h3>
<p>At the current state of the Python connector, an authorization check has to
be implemented in the callback function by evaluating the connection attributes
found in <code class="docutils literal notranslate"><span class="pre">request_context['connection_attributes']</span></code> (cf. <a class="reference internal" href="#server-functions"><span class="std std-ref">Server functions</span></a>).</p>
</div>
<div class="section" id="hard-coded-function-descriptions">
<h3>Hard-coded function descriptions<a class="headerlink" href="#hard-coded-function-descriptions" title="Permalink to this headline">¶</a></h3>
<p>In some cases, it is not possible to retrieve the metadata from an SAP backend
system (cf. <a class="reference internal" href="bibliography.html#c09b"><span class="std std-ref">Schmidt and Li (2009c, pp. 9ff)</span></a>). For these situations,
objects of <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a> and
<a class="reference internal" href="pyrfc.html#pyrfc.TypeDescription" title="pyrfc.TypeDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDescription</span></code></a> can be hard-coded.</p>
<p>The required methods are</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription.add_parameter" title="pyrfc.FunctionDescription.add_parameter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FunctionDescription.add_parameter</span></code></a></td>
<td>Adds a parameter to the function description.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="pyrfc.html#pyrfc.TypeDescription.add_field" title="pyrfc.TypeDescription.add_field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TypeDescription.add_field</span></code></a></td>
<td>Adds a field to the type description.</td>
</tr>
</tbody>
</table>
<div class="section" id="example-serverfunctiondescription-py">
<span id="ex-serverfunctiondescription"></span><h4>Example serverFunctionDescription.py<a class="headerlink" href="#example-serverfunctiondescription-py" title="Permalink to this headline">¶</a></h4>
<p>Similar to the example <code class="docutils literal notranslate"><span class="pre">hardCodedServer.c</span></code> of the C connector, in the file
<code class="docutils literal notranslate"><span class="pre">serverFunctionDescription.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">examples/</span></code> directory,
a function description – and included type descriptions – are constructed
manually.
In line 3-15 we define a <a class="reference internal" href="pyrfc.html#pyrfc.TypeDescription" title="pyrfc.TypeDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDescription</span></code></a> object
consisting of three fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">animals</span> <span class="o">=</span> <span class="n">TypeDescription</span><span class="p">(</span><span class="s2">&quot;ANIMALS&quot;</span><span class="p">,</span> <span class="n">nuc_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">uc_length</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
<span class="n">animals</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;LION&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_CHAR&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">uc_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">nuc_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">uc_offset</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>
<span class="n">animals</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;ELEPHANT&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_FLOAT&#39;</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">uc_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">nuc_offset</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">uc_offset</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">animals</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;ZEBRA&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_INT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">uc_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">nuc_offset</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">uc_offset</span><span class="o">=</span><span class="mi">24</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Afterwards, a <a class="reference internal" href="pyrfc.html#pyrfc.FunctionDescription" title="pyrfc.FunctionDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionDescription</span></code></a> object is created and
several fields are added.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func_desc</span> <span class="o">=</span> <span class="n">FunctionDescription</span><span class="p">(</span><span class="s2">&quot;I_DONT_EXIST&quot;</span><span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;DOC&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_INT&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_IMPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;CAT&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_CHAR&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_IMPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;ZOO&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_STRUCTURE&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_IMPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span>
    <span class="n">type_description</span><span class="o">=</span><span class="n">animals</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;BIRD&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_FLOAT&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_IMPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">decimals</span><span class="o">=</span><span class="mi">16</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;COW&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_CHAR&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_EXPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">6</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;STABLE&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_STRUCTURE&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_EXPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span>
    <span class="n">type_description</span><span class="o">=</span><span class="n">animals</span>
<span class="p">)</span>
<span class="n">func_desc</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;HORSE&#39;</span><span class="p">,</span> <span class="n">field_type</span><span class="o">=</span><span class="s1">&#39;RFCTYPE_INT&#39;</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;RFC_EXPORT&#39;</span><span class="p">,</span>
    <span class="n">nuc_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">uc_length</span><span class="o">=</span><span class="mi">4</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client scenario</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Server scenario</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-serverstfcconnection-py">Example <code class="docutils literal notranslate"><span class="pre">serverStfcConnection.py</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#server-server">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-topics">Advanced topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="remarks.html">Remarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyrfc.html"><code class="docutils literal notranslate"><span class="pre">pyrfc</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="client.html" title="Client scenario"
              >previous</a> |
            <a href="authentication.html" title="Security"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/server.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, SAP.
      Last updated on 2018-07-31 15:01.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>